<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Attendance AI-2B</title>
<link rel="shortcut icon" href="logo.jpeg" type="image/x-icon">
<style>
  body {
    font-family: Arial, sans-serif;
    padding: 20px;
    background-color: #f4f4f4;
  }
.page-header {
  text-align: center;
  padding: 15px;
  background-color: #007BFF;
  color: white;
  margin-bottom: 20px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}
.page-header h1, .page-header p {
  margin: 0;
}

  .page-footer {
    background-color: #f1f1f1;
    color: #555;
    margin-top: 30px;
    font-size: 0.9em;
    border-top: 1px solid #ccc;
    padding: 15px 10px;
    display: flex;
    justify-content: center;
  }
  label {
    font-weight: bold;
    color: #007BFF;
    margin-right: 10px;
  }
  select {
    padding: 5px 8px;
    font-size: 1em;
    border-radius: 4px;
    border: 1px solid #ccc;
    width: 400px;
  }
  table {
    width: 100%;
    border-collapse: collapse;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
  }
  th, td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: center;
  }
  th {
    background-color: #007BFF;
    color: white;
  }
  input[type="checkbox"] {
    transform: scale(1.2);
  }
  .summary {
    margin-top: 20px;
    text-align: center;
  }
  .summary p {
    font-size: 1.2em;
    margin: 5px;
  }
  button {
    margin-top: 10px;
    padding: 10px 20px;
    background-color: #007BFF;
    color: white;
    border: none;
    cursor: pointer;
    font-size: 1em;
    border-radius: 5px;
  }
  button:hover {
    background-color: #0056b3;
  }
  footer {
    margin-top: 30px;
    text-align: center;
  }
  .footer-heading {
    text-align: center;
    margin-top: 30px;
    color: #555;
    font-weight: 600;
    font-size: 1.5em;
    font-family: Arial, sans-serif;
  }
  .page-header img {
    height: 50px;
    width: auto;
  }
</style>
</head>
<body>

<header class="page-header">
  <img src="logo 2.jpg" alt="">
  <div>
    <h1>Babu Banarsi Das University</h1>
    <p>School of Engineering | BTech CSE AI Section AI-2B</p>
  </div>
  <img src="logo.jpeg" alt="">
</header>



<main>
  <table>
    <thead>
      <tr>
        <th>Roll No</th>
        <th>Name</th>
        <th>Present</th>
        <th>Status</th>
      </tr>
    </thead>
    <tbody id="student-table"></tbody>
  </table>

  <div class="summary">
    <p>Total Students: <span id="total-count">0</span></p>
    <p>Present: <span id="present-count">0</span></p>
    <p>Absent: <span id="absent-count">0</span></p>
    <button id="download-pdf-btn">Download PDF (Present Students)</button>
  </div>
</main>

<footer>
  <label for="subject-select">Select Subject / Professor / Code:</label>
  <select id="subject-select">
    <option value="">-- Select --</option>
  </select>

  <section style="background-color: #ccc; padding: 15px; margin-top: 15px;">
    <h1>All Rights Reserved &copy; Saksham Chaurasia & Saksham Bharat</h1>
    <h2 class="footer-heading">Powered By Saksham Bharat</h2>
    <div style="margin-top: 10px; font-weight: bold;">
      Upasthiti: A Saksham Bharat Product
    </div>
  </section>
</footer>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
<script>
  const students = [
  { roll: 1240439040, name: "ADITYA KUMAR GUPTA", present: false },
  { roll: 1240439041, name: "ADITYA KUMAR MISHRA", present: false },
  { roll: 1240439042, name: "ADITYA MALL", present: false },
  { roll: 1240439055, name: "AFTAB ALAM", present: false },
  { roll: 1240439064, name: "AKSHAT", present: false },
  { roll: 1240439089, name: "ANISH YADAV", present: false },
  { roll: 1240439095, name: "ANKIT KUMAR YADAV", present: false },
  { roll: 1240439099, name: "ANKITA MAURYA", present: false },
  { roll: 1240439103, name: "ANSHIKA YADAV", present: false },
  { roll: 1240439113, name: "ANUJ KUMAR", present: false },
  { roll: 1240439114, name: "ANUJ PAL", present: false },
  { roll: 1240439122, name: "ANUSH KUMAR MALL", present: false },
  { roll: 1240439139, name: "ASHISH PANDEY", present: false },
  { roll: 1240439146, name: "ASHWANI SINGH", present: false },
  { roll: 1240439150, name: "AVICHAL PANDEY", present: false },
  { roll: 1240439158, name: "AYUSH GUPTA", present: false },
  { roll: 1240439159, name: "AYUSH KUMAR MISHRA", present: false },
  { roll: 1240439166, name: "AYUSHI SHUKLA", present: false },
  { roll: 1240439169, name: "BHAVYA GUPTA", present: false },
  { roll: 1240439174, name: "DEEPAK PRAJAPATI", present: false },
  { roll: 1240439175, name: "DEEPANSHU GOYAL", present: false },
  { roll: 1240439190, name: "GARIMA SINGH", present: false },
  { roll: 1240439194, name: "GUNGUN GOSWAMI", present: false },
  { roll: 1240439208, name: "HIMANSHU", present: false },
  { roll: 1240439210, name: "HIMANSHU KUMAR", present: false },
  { roll: 1240439212, name: "HIMANSHU MAURYA", present: false },
  { roll: 1240439216, name: "KAMAKHYA SINGH YADAV", present: false },
  { roll: 1240439228, name: "KHUSHREET SETHI", present: false },
  { roll: 1240439233, name: "KRISHNA", present: false },
  { roll: 1240439247, name: "LAXMIISH SHUKLA", present: false },
  { roll: 1240439257, name: "MAULIK KESARWANI", present: false },
  { roll: 1240439263, name: "MD ISRAIL", present: false },
  { roll: 1240439286, name: "NANDITA GUPTA", present: false },
  { roll: 1240439289, name: "NIKHIL KUMAR YADAV", present: false },
  { roll: 1240439292, name: "NIRIKSHA SHAHI", present: false },
  { roll: 1240439308, name: "PIYUSH DUBEY", present: false },
  { roll: 1240439317, name: "PRANJAL GUPTA", present: false },
  { roll: 1240439322, name: "PRASHIDHI SINGH BHADAURIYA", present: false },
  { roll: 1240439344, name: "RAUNAK SINGH", present: false },
  { roll: 1240439345, name: "RAVIKANT YADAV", present: false },
  { roll: 1240439355, name: "RITIK KUMARI", present: false },
  { roll: 1240439366, name: "SACHIN PAL", present: false },
  { roll: 1240439368, name: "SAKSHAM CHAURASIA", present: false },
  { roll: 1240439391, name: "SATYAM SINGH", present: false },
  { roll: 1240439397, name: "SAURABH KASHYAP", present: false },
  { roll: 1240439401, name: "SHAFIQURRAHMAN ANSARI", present: false },
  { roll: 1240439404, name: "SHALENDER PAL", present: false },
  { roll: 1240439410, name: "SHASHANK SHEKHAR", present: false },
  { roll: 1240439412, name: "SHIKHAR KUMAR VISHWAKARMA", present: false },
  { roll: 1240439414, name: "SHIVA KUMAR TIWARI", present: false },
  { roll: 1240439426, name: "SHRESHTHA VERMA", present: false },
  { roll: 1240439431, name: "SHUBHAM CHAUBEY", present: false },
  { roll: 1240439432, name: "SHUBHAM GOYAL", present: false },
  { roll: 1240439438, name: "SIKHAR TIWARI", present: false },
  { roll: 1240439445, name: "SONU MISHRA", present: false },
  { roll: 1240439466, name: "TANISHQ SHUKLA", present: false },
  { roll: 1240439475, name: "UMESH MOURYA", present: false },
  { roll: 1240439480, name: "VAIBHAV SINGH", present: false },
  { roll: 1240439482, name: "VAIBHAV TIWARI", present: false },
  { roll: 1240439483, name: "VAIBHAV TRIPATHI", present: false },
  { roll: 1240439487, name: "VANSH SHARMA", present: false },
  { roll: 1240439512, name: "VISHNU TIWARI", present: false },
  { roll: 1240439514, name: "VIVEK CHAND", present: false },
  { roll: 1240439517, name: "YADAV YOGENDRA SANTOSH", present: false },
  { roll: 1240439526, name: "YASHRAJ YADAV", present: false },
  { roll: 1240439532, name: "YUVRAJ TIWARI", present: false },
  { roll: 1240439408, name: "SHANTANU", present: false }
];


 const subjects = [
  { name: "Organizational Behavior", professor: "Dr. Pooja Verma", code: "NHS4401" },
  { name: "Statistical and Numerical Techniques", professor: "Mr. U.S. Shukla", code: "NBS4401" },
  { name: "Concepts of Machine Learning with Python", professor: "Ms. Vaishnavi Yadav", code: "NAI4401" },
  { name: "Database Management Systems", professor: "Ms. Avantika", code: "NCS4401" },
  { name: "Operating Systems", professor: "Mr. Yogendra Kumar Tripathi", code: "NCS4402" },
  { name: "Computer Organization & Architecture", professor: "Ms. Poonam Verma", code: "NCS4404" },
  { name: "Machine Learning Lab", professor: "Ms. Vaishnavi Yadav", code: "NAI4451" },
  { name: "Database Management Systems Lab", professor: "Ms. Avantika", code: "NCS4451" },
  { name: "Indian Constitution", professor: "New Faculty 1", code: "NVC4401" },
  { name: "General Proficiency", professor: "Ms. Vaishnavi Yadav", code: "NGP4401" },
  {name:"Utkarsh Celebration"},
   {name:"auditorium"} 
   
];


  const tableBody = document.getElementById("student-table");
  const totalCount = document.getElementById("total-count");
  const presentCount = document.getElementById("present-count");
  const absentCount = document.getElementById("absent-count");
  const downloadPDFBtn = document.getElementById("download-pdf-btn");
  const subjectSelect = document.getElementById("subject-select");

  // Fill subject dropdown with combined info
  function fillSubjectSelect() {
    subjects.forEach((subj) => {
      const option = document.createElement("option");
      option.value = `${subj.name}-${subj.professor}\n-${subj.code}`;
      option.textContent = `${subj.name} | ${subj.professor} | ${subj.code}`;
      subjectSelect.appendChild(option);
    });
  }

  fillSubjectSelect();

  function updateCounts() {
    const present = students.filter((s) => s.present).length;
    const absent = students.length - present;

    presentCount.textContent = present;
    absentCount.textContent = absent;
  }

  students.forEach((student) => {
    const row = document.createElement("tr");

    const rollCell = document.createElement("td");
    rollCell.textContent = student.roll;

    const nameCell = document.createElement("td");
    nameCell.textContent = student.name;

    const checkboxCell = document.createElement("td");
    const checkbox = document.createElement("input");
    checkbox.type = "checkbox";
    checkbox.setAttribute('aria-label', `Mark ${student.name} as present`);

    const statusCell = document.createElement("td");
    statusCell.textContent = "Absent";

    checkbox.addEventListener("change", (e) => {
      student.present = e.target.checked;
      statusCell.textContent = student.present ? "Present" : "Absent";
      updateCounts();
    });

    checkboxCell.appendChild(checkbox);

    row.appendChild(rollCell);
    row.appendChild(nameCell);
    row.appendChild(checkboxCell);
    row.appendChild(statusCell);

    tableBody.appendChild(row);
  });

  totalCount.textContent = students.length;
  updateCounts();

  function getCurrentDateTime() {
    return new Date().toLocaleString();
  }

  async function downloadPDF() {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  const presentStudents = students.filter((s) => s.present);
  const total = students.length;
  const present = presentStudents.length;
  const absent = total - present;

  if (presentStudents.length === 0) {
    alert("No students marked present!");
    return;
  }

  doc.setFontSize(16);
  doc.text("AI-2B Attendance Report", 14, 20);

  doc.setFontSize(12);
  doc.text(`Date & Time: ${getCurrentDateTime()}`, 14, 30);

  if (subjectSelect.value) {
    doc.text(`Subject/Professor/Code: ${subjectSelect.value}`, 14, 40);
  } else {
    doc.text("Subject/Professor/Code: Not selected", 14, 40);
  }

  // Add attendance summary
  doc.text(`Total Students: ${total}`, 14, 50);
  doc.text(`Present Students: ${present}`, 14, 57);
  doc.text(`Absent Students: ${absent}`, 14, 64);

  // Prepare table data
  const tableColumn = ["Roll No", "Name"];
  const tableRows = presentStudents.map((s) => [s.roll, s.name]);

  doc.autoTable({
    head: [tableColumn],
    body: tableRows,
    startY: 72, // start below the summary
  });

  doc.save("AI-2B-Attendance.pdf");
}


  downloadPDFBtn.addEventListener("click", downloadPDF);
</script>
</body>
</html>
